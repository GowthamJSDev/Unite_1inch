generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgres"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("DATABASE_SHADOW_URL")
}

model Users {
  id            Int        @id @default(autoincrement())
  walletAddress String     @unique
  lastLogin     String
  UserOrders    Orders[]
  Triggers      Triggers[]
}

model Orders {
  id         Int     @id @default(autoincrement())
  wallet     Users   @relation(fields: [walletId], references: [walletAddress], onDelete: NoAction, onUpdate: NoAction)
  walletId   String
  orderHash  String  @unique
  signature  String?
  tokenPair  String
  amount     String
  feePercent String
  youReceive String
  status     String
  createdOn  String
}

model Triggers {
  id           Int    @id @default(autoincrement())
  wallet       Users  @relation(fields: [walletId], references: [walletAddress], onDelete: NoAction, onUpdate: NoAction)
  walletId     String
  makerAsset   String
  takerAsset   String
  makingAmount String
  takingAmount String
  maker        String
  receiver     String
  status       String
  targetValue  String
}
